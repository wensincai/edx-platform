---
metadata:
    display_name: Custom JavaScript Display and Grading
    markdown: !!null
    showanswer: never
data: |
      <problem>
          <p>
              In these problems (also called custom JavaScript problems or JS Input
              problems), you add a problem or tool that uses JavaScript in Studio.
              Studio embeds the problem in an IFrame so that your students can
              interact with it in the LMS. You can grade your students' work using
              JavaScript and some basic Python, and the grading is integrated into the
              edX grading system.
          </p>
          <p>
              The JS Input problem that you create must use HTML, JavaScript, and
              cascading style sheets (CSS). You can use any application creation tool,
              such as the Google Web Toolkit (GWT), to create your JS Input problem.
          </p>
          <p>
              For more information, see
              <a href="http://edx.readthedocs.io/projects/edx-partner-course-staff/en/latest/exercises_tools/custom_javascript.html" target="_blank">
              Custom JavaScript Problem</a> in <i>Building and Running an edX Course</i>.
          </p>
          <p>
              JavaScript developers can also see
              <a href="http://edx.readthedocs.io/projects/edx-developer-guide/en/latest/extending_platform/javascript.html" target="_blank">
              Custom JavaScript Applications</a> in the <i>EdX Developer's Guide</i>.
          </p>
          <p>
              When you add the problem, be sure to select <strong>Settings</strong>
              to specify a <strong>Display Name</strong> and other values that apply.
              Also be sure to specify a <strong>title</strong> attribute on the <strong>jsinput</strong> tag;
              this will be used for the title attribute on the generated IFrame. Generally,
              the title attribute on the IFrame should match the title tag of the HTML hosted
              within the IFrame, which is specified by the <strong>html_file</strong> attribute.
          </p>
          <p>You can use the following example problem as a model.</p>

          <customresponse cfn="check_function">
      <script type="loncapa/python">
      <![CDATA[
      import json
      def check_function(e, ans):
        """
        "par" is a dictionary that contains two keys, "answer" and "state".
        The value of "answer" is the JSON string that "getGrade" returns.
        The value of "state" is the JSON string that "getState" returns.
        Clicking either "Submit" or "Save" registers the current state.
        """
        par = json.loads(ans)
        # You can use the value of the answer key to grade:
        answer = json.loads(par["answer"])
        return False
        # return answer["cylinder"] and not answer["cube"]
        '''
        # Or you can use the value of the state key to grade:
        state = json.loads(par["state"])
        selectedObjects = state["selectedObjects"]
        # return selectedObjects["cylinder"] and not selectedObjects["cube"]
        '''
      ]]>
      </script>
            <p>Text shown before the IFrame</p>
            <jsinput
              gradefn="JSInputDemo.getGrade"
              get_statefn="JSInputDemo.getState"
              set_statefn="JSInputDemo.setState"
              initial_state='{"selectedChoice": "choice1", "availableChoices": ["choice1", "choice2", "choice3"]}'
              width="400"
              height="400"
              html_file="/static/jsinput_example.html"
              title="Choice-dependent Content"
              sop="false"/>
          </customresponse>
      </problem>
